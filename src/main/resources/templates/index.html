<!--&lt;!&ndash; Navbar ou header selon connexion &ndash;&gt;-->
<!--<div th:if="${utilisateur != null}" th:replace="fragments/navbar-connectee :: navbar-connectee"></div>-->
<!--<div th:if="${utilisateur == null}" th:replace="fragments/header :: header"></div>-->

<!--&lt;!&ndash; Modals pour Connexion/Inscription &ndash;&gt;-->
<!--<div th:replace="fragments/modal-auth :: modals-auth"></div>-->

<html data-th-replace="~{layout/layout :: layout(content=~{:: main}, title=~{:: title}, css=~{:: #extraCss})}">
<title>Ench√®res ENI - Accueil</title>

<main>
    <section class="filtres">
        <p class="filtre-title">Filtres :</p>
        <div class="filtre-group">
            <div class="filtre-input">
                <label for="searchName"></label>
                <div class="input-icon">
                    <i class="icon-search">üîç</i>
                    <input type="text" id="searchName" placeholder="Le nom de l'article contient">
                </div>
            </div>
            <div class="filtre-button">
                <input type="submit" value="Rechercher" class="btn">
            </div>
            <div class="filtre-categorie">
                <label for="categorie">Cat√©gorie :</label>
                <select id="categorie">
                    <option value="all">Toutes</option>
                    <!-- Affichage des cat√©gories avec Thymeleaf -->
                    <option th:each="categorie : ${categories}" th:value="${categorie.idCategorie}" th:text="${categorie.libelle}"></option>
                </select>
            </div>
        </div>
    </section>

    <h2 class="encheres-title">Liste des ench√®res</h2>

    <section class="encheres">
        <div class="carousel">
            <div class="card-container">
                <div class="card" th:each="article : ${articles}">
                    <div class="card-image">
                        <img th:src="@{${article.urlImage}}" alt="Image de l'article">
                    </div>

                    <div class="card-content">
                        <h3 th:text="${article.nomArticle}" class="card-title">Nom article</h3>
                        <p><strong>Prix :</strong> <span th:text="${article.miseAPrix} + ' cr√©dits'"></span></p>
                        <p><strong>Fin de l'ench√®re :</strong> <span th:text="${#dates.format(article.dateFinEncheres, 'dd/MM/yyyy')}"></span></p>
                        <p><strong>Vendeur :</strong> <span th:text="${article.utilisateur.pseudo}"></span></p>
                        <a th:href="@{'/encheres/' + ${article.noArticle}}" class="btn">Voir</a>
                    </div>
                </div>
            </div>
            <div class="carousel-btn prev">‚Äπ</div>
            <div class="carousel-btn next">‚Ä∫</div>
        </div>
    </section>
</main>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const carousels = document.querySelectorAll('.carousel');

        carousels.forEach(carousel => {
            const prevBtn = carousel.querySelector('.carousel-btn.prev');
            const nextBtn = carousel.querySelector('.carousel-btn.next');
            const cardContainer = carousel.querySelector('.card-container');
            const cards = carousel.querySelectorAll('.card');

            let cardsPerView = 4; // Par d√©faut, 4 cartes par vue

            // Ajuster le nombre de cartes par vue en fonction de la largeur de l'√©cran
            function updateCardsPerView() {
                if (window.innerWidth <= 600) {
                    cardsPerView = 1; // 1 carte pour petits √©crans
                } else if (window.innerWidth <= 900) {
                    cardsPerView = 2; // 2 cartes pour √©crans moyens
                } else if (window.innerWidth <= 1200) {
                    cardsPerView = 3; // 3 cartes pour √©crans plus larges
                } else {
                    cardsPerView = 4; // 4 cartes pour grands √©crans
                }

                updateCarousel();
            }

            // Fonction pour ajuster la position du carrousel
            function updateCarousel() {
                const cardWidth = cards[0].offsetWidth;
                const totalCards = cards.length;
                const maxIndex = totalCards - cardsPerView;
                let currentIndex = 0;

                const offset = currentIndex * cardWidth;
                cardContainer.style.transform = `translateX(-${offset}px)`;

                // G√©rer les boutons pr√©c√©dent et suivant
                nextBtn.addEventListener('click', function() {
                    if (currentIndex < maxIndex) {
                        currentIndex++;
                        cardContainer.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
                    }
                });

                prevBtn.addEventListener('click', function() {
                    if (currentIndex > 0) {
                        currentIndex--;
                        cardContainer.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
                    }
                });
            }

            // Initialiser la largeur des cartes √† chaque changement de taille de fen√™tre
            window.addEventListener('resize', updateCardsPerView);
            updateCardsPerView(); // Initial call to set the correct number of cards per view
        });
    });
</script>

</html>


