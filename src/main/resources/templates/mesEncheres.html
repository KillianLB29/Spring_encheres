<html data-th-replace="~{layout/layout :: layout(content=~{:: main}, title=~{:: title}, css=~{:: #extraCss})}">
<title>Enchères ENI - Mes enchères</title>
<title>Mes enchères</title>
<div id="extraCss">
    <link rel="stylesheet" data-th-href="@{/css/mesEncheres.css}">
    <link rel="stylesheet" data-th-href="@{/css/mesEncheres_mobile.css}">
</div>
<main>

    <h2 class="titre_mobile_encheres">Mes objets mis en enchère terminés</h2>
    <section class="encheres">
        <div class="carousel">
            <button class="carousel-btn prev">&#10094;</button>
            <div class="card-container">
                <div class="card" th:each="article : ${encheresTerminer}">
                    <div class="card-image">
                        <img th:src="@{/img/lamp-design.jpg}" alt="Image de l'article">
                    </div>
                    <div class="card-content">
                        <h3 th:text="${article.nomArticle}" class="card-title">Nom article</h3>
                        <p><strong>Prix :</strong> <span th:text="${article.miseAPrix} + ' crédits'"></span></p>
                        <p><strong>Fin :</strong> <span th:text="${#dates.format(article.dateFinEncheres, 'dd/MM/yyyy')}"></span></p>
                        <p><strong>Vendeur :</strong> <span th:text="${article.utilisateur.pseudo}"></span></p>
                        <a th:href="@{'/encheres/' + ${article.noArticle}}" class="btn">Voir</a>
                    </div>
                </div>
            </div>
            <button class="carousel-btn next">&#10095;</button>
        </div>
    </section>

    <h2 class="titre_mobile_encheres">Mes objets actuellement en enchères</h2>
    <section class="encheres">
        <div class="carousel">
            <button class="carousel-btn prev">&#10094;</button>
            <div class="card-container">
                <div class="card" th:each="article : ${encheresEnCours}">
                    <div class="card-image">
                        <img th:src="@{/img/lamp-design.jpg}" alt="Image de l'article">
                    </div>
                    <div class="card-content">
                        <h3 th:text="${article.nomArticle}" class="card-title">Nom article</h3>
                        <p><strong>Prix :</strong> <span th:text="${article.miseAPrix} + ' crédits'"></span></p>
                        <p><strong>Fin :</strong> <span th:text="${#dates.format(article.dateFinEncheres, 'dd/MM/yyyy')}"></span></p>
                        <p><strong>Vendeur :</strong> <span th:text="${article.utilisateur.pseudo}"></span></p>
                        <a th:href="@{'/encheres/' + ${article.noArticle}}" class="btn">Voir</a>
                    </div>
                </div>
            </div>
            <button class="carousel-btn next">&#10095;</button>
        </div>
    </section>

    <h2 class="titre_mobile_encheres">Les enchères auxquelles je participe</h2>
    <section class="encheres">
        <div class="carousel">
            <button class="carousel-btn prev">&#10094;</button>
            <div class="card-container">
                <div class="card" th:each="article : ${encheresParticipe}">
                    <div class="card-image">
                        <img th:src="@{/img/lamp-design.jpg}" alt="Image de l'article">
                    </div>
                    <div class="card-content">
                        <h3 th:text="${article.nomArticle}" class="card-title">Nom article</h3>
                        <p><strong>Prix :</strong> <span th:text="${article.miseAPrix} + ' crédits'"></span></p>
                        <p><strong>Fin :</strong> <span th:text="${#dates.format(article.dateFinEncheres, 'dd/MM/yyyy')}"></span></p>
                        <p><strong>Vendeur :</strong> <span th:text="${article.utilisateur.pseudo}"></span></p>
                        <a th:href="@{'/encheres/' + ${article.noArticle}}" class="btn">Voir</a>
                    </div>
                </div>
            </div>
            <button class="carousel-btn next">&#10095;</button>
        </div>
    </section>
<script> document.addEventListener('DOMContentLoaded', function() {
    const prevBtn = document.querySelector('.carousel-btn.prev');
    const nextBtn = document.querySelector('.carousel-btn.next');
    const cardContainer = document.querySelector('.card-container');
    const totalCards = document.querySelectorAll('.card').length;
    const cardsPerView = 4;
    let currentIndex = 0;

    // Fonction pour mettre à jour l'affichage du carrousel
    function updateCarousel() {
        cardContainer.style.transform = `translateX(-${currentIndex * (100 / cardsPerView)}%)`;
    }

    // Fonction pour aller à la carte suivante
    nextBtn.addEventListener('click', function() {
        if (currentIndex < totalCards - cardsPerView) {
            currentIndex++;
            updateCarousel();
        }
    });

    // Fonction pour aller à la carte précédente
    prevBtn.addEventListener('click', function() {
        if (currentIndex > 0) {
            currentIndex--;
            updateCarousel();
        }
    });
});
</script>
</main>
</html>
